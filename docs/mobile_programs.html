<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_ntmge9rg2myp-2{list-style-type:none}ul.lst-kix_ntmge9rg2myp-3{list-style-type:none}ul.lst-kix_ntmge9rg2myp-4{list-style-type:none}ul.lst-kix_ntmge9rg2myp-5{list-style-type:none}ul.lst-kix_ntmge9rg2myp-0{list-style-type:none}ul.lst-kix_ntmge9rg2myp-1{list-style-type:none}.lst-kix_phk3leb6k2dr-8>li:before{content:"-  "}.lst-kix_phk3leb6k2dr-5>li:before{content:"-  "}ul.lst-kix_phk3leb6k2dr-7{list-style-type:none}ul.lst-kix_phk3leb6k2dr-8{list-style-type:none}.lst-kix_ntmge9rg2myp-4>li:before{content:"-  "}.lst-kix_phk3leb6k2dr-4>li:before{content:"-  "}.lst-kix_phk3leb6k2dr-6>li:before{content:"-  "}.lst-kix_phk3leb6k2dr-3>li:before{content:"-  "}.lst-kix_phk3leb6k2dr-7>li:before{content:"-  "}.lst-kix_ntmge9rg2myp-2>li:before{content:"-  "}.lst-kix_ntmge9rg2myp-3>li:before{content:"-  "}ul.lst-kix_phk3leb6k2dr-0{list-style-type:none}.lst-kix_ntmge9rg2myp-0>li:before{content:"-  "}.lst-kix_ntmge9rg2myp-1>li:before{content:"-  "}ul.lst-kix_phk3leb6k2dr-1{list-style-type:none}ul.lst-kix_phk3leb6k2dr-2{list-style-type:none}ul.lst-kix_phk3leb6k2dr-3{list-style-type:none}ul.lst-kix_phk3leb6k2dr-4{list-style-type:none}ul.lst-kix_phk3leb6k2dr-5{list-style-type:none}ul.lst-kix_phk3leb6k2dr-6{list-style-type:none}.lst-kix_phk3leb6k2dr-1>li:before{content:"-  "}.lst-kix_phk3leb6k2dr-0>li:before{content:"-  "}.lst-kix_phk3leb6k2dr-2>li:before{content:"-  "}.lst-kix_ntmge9rg2myp-5>li:before{content:"-  "}.lst-kix_ntmge9rg2myp-6>li:before{content:"-  "}.lst-kix_ntmge9rg2myp-7>li:before{content:"-  "}.lst-kix_ntmge9rg2myp-8>li:before{content:"-  "}ul.lst-kix_ntmge9rg2myp-6{list-style-type:none}ul.lst-kix_ntmge9rg2myp-7{list-style-type:none}ul.lst-kix_ntmge9rg2myp-8{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c0{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Courier New";font-style:normal}.c5{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Courier New";font-style:italic}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left;height:12pt}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c4{color:#000000;text-decoration:none;vertical-align:baseline;font-style:normal}.c8{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c1{font-size:10pt;font-family:"Courier New";font-weight:700}.c6{font-size:10pt;font-family:"Courier New";font-weight:400}.c7{text-indent:36pt}.title{padding-top:24pt;color:#000000;font-weight:700;font-size:36pt;padding-bottom:6pt;font-family:"Times New Roman";line-height:1.0;text-align:left}.subtitle{padding-top:18pt;color:#666666;font-size:24pt;padding-bottom:4pt;font-family:"Georgia";line-height:1.0;font-style:italic;text-align:left}li{color:#000000;font-size:12pt;font-family:"Times New Roman"}p{margin:0;color:#000000;font-size:12pt;font-family:"Times New Roman"}h1{padding-top:12pt;color:#000000;font-weight:700;font-size:18pt;padding-bottom:12pt;font-family:"Times New Roman";line-height:1.0;text-align:left}h2{padding-top:11.2pt;color:#000000;font-weight:700;font-size:14pt;padding-bottom:11.2pt;font-family:"Times New Roman";line-height:1.0;text-align:left}h3{padding-top:12pt;color:#000000;font-weight:700;font-size:12pt;padding-bottom:12pt;font-family:"Times New Roman";line-height:1.0;text-align:left}h4{padding-top:12.8pt;color:#000000;font-weight:700;font-size:10pt;padding-bottom:12.8pt;font-family:"Times New Roman";line-height:1.0;text-align:left}h5{padding-top:12.8pt;color:#000000;font-weight:700;font-size:8pt;padding-bottom:12.8pt;font-family:"Times New Roman";line-height:1.0;text-align:left}h6{padding-top:18pt;color:#000000;font-weight:700;font-size:8pt;padding-bottom:18pt;font-family:"Times New Roman";line-height:1.0;text-align:left}</style></head><body class="c8 doc-content"><p class="c3"><span class="c6">=== </span><span class="c4 c1">MOBprograms</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">MOBprograms are a way to make your mobiles more interesting. This</span></p><p class="c3"><span class="c0">basic version has enough to get things going, and should be quite readable and</span></p><p class="c3"><span class="c0">understandable and more to the point, extendable. The remainder of this document describes MOBprograms and gives a couple trivial examples.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Table of Contents:</span></p><p class="c3"><span class="c0">The Basic Idea</span></p><p class="c3"><span class="c0">MOBprogram Syntax</span></p><p class="c3"><span class="c0">Associating MOBprograms With A Mobile</span></p><p class="c3"><span class="c0">MOBprogram Files</span></p><p class="c3"><span class="c0">Trigger Types</span></p><p class="c3"><span class="c0">Variables</span></p><p class="c3"><span class="c0">Control Flow Syntax</span></p><p class="c3"><span class="c0">Operators</span></p><p class="c3"><span class="c0">If_Checks In Control Flow</span></p><p class="c3"><span class="c0">MOBcommands Of Interest</span></p><p class="c3"><span class="c0">Regarding CPU Slowdown</span></p><p class="c3"><span class="c0">Miscellaneous Information</span></p><p class="c3"><span class="c0">Adding New Triggers.</span></p><p class="c3"><span class="c0">Credits</span></p><p class="c3"><span class="c0">Quick Reference Guide</span></p><p class="c3"><span class="c0">MOBprogram Example</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">-----------------------------The Basic Idea---------------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Ever wonder why most muds either seem dead or overcrowded? The answer</span></p><p class="c3"><span class="c0">is probably partially due to the fact that the mobiles never do anything</span></p><p class="c3"><span class="c0">but wait to be slaughtered. Unless someone has gone to great lengths</span></p><p class="c3"><span class="c0">and added many special procedures, most mobiles have no idea you are in</span></p><p class="c3"><span class="c0">the room with them and rarely listen to what you say. The typical Midgaard</span></p><p class="c3"><span class="c0">mayor wanders happily along even when the populace pokes him, waves his</span></p><p class="c3"><span class="c0">City Key about, unlocks his gates, or frenchs his secretary, etc. So a way to</span></p><p class="c3"><span class="c0">give the mobiles a bit more spirit would be neat. Enter the MOBprograms.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The backbone of the MOBprograms shall be called triggers from this</span></p><p class="c3"><span class="c0">point on. Essentially, they are procedure calls placed in sneaky places in</span></p><p class="c3"><span class="c0">the mud code which provide the context for what is going on around the</span></p><p class="c3"><span class="c0">mobile. So, if something happens in the mobile&#39;s room and a trigger is</span></p><p class="c3"><span class="c0">activated, then a list of commands is sent to the interpreter in the</span></p><p class="c3"><span class="c0">mobile&#39;s name, thus making her/it/him do an appropriate something.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Since knowing the appropriate response for every mobile to every</span></p><p class="c3"><span class="c0">possible trigger is not easy, this command list shouldnt be a rigid script, but</span></p><p class="c3"><span class="c0">needs to be somehow unique for the mobile and the situation. However, in</span></p><p class="c3"><span class="c0">order to know the situation, a mobile needs to know more about the trigger</span></p><p class="c3"><span class="c0">than if it just happened. So, we have to include some sort of variables</span></p><p class="c3"><span class="c0">as well to set the context appropriately.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">As most Implementors know, most area creators are not versed in</span></p><p class="c3"><span class="c0">coding, but usually have great ideas. Therefore, whatever system is used needs</span></p><p class="c3"><span class="c0">to be quite simple. This is not to demean creators in any way. Simply, it is</span></p><p class="c3"><span class="c0">useless to have a powerful system, if the only person able to write anything</span></p><p class="c3"><span class="c0">is someone who finds C coding in general to be exciting and non frustrating.</span></p><p class="c3"><span class="c0">If that is going to be the case, then stick to the special procedures, since</span></p><p class="c3"><span class="c0">there is no bound to what a complex special procedure can accomplish. Yet,</span></p><p class="c3"><span class="c0">from experience working on several muds, most admins and Implementors prefer</span></p><p class="c3"><span class="c0">not to be writing one shot spec_procs to satisfy the needs of their creators.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Thus, the basic idea: let mobiles react to a myriad of mud</span></p><p class="c3"><span class="c0">events/situations by having them perform a list of commands which can be</span></p><p class="c3"><span class="c0">tailored to the moment through a simple and unintimidating scheme usable by</span></p><p class="c3"><span class="c0">any creator.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">----------------------------MOBprogram Syntax--------------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The simplest way to describe any syntax is by example, so here goes.</span></p><p class="c3"><span class="c0">First, define the notation: anything contained in braces {} is required,</span></p><p class="c3"><span class="c0">anything in brackets [] is optional, anything in quotes &quot;&quot; is a case</span></p><p class="c3"><span class="c0">insensitive literal, NL refers to a required new-line. The meanings of</span></p><p class="c3"><span class="c0">the labels used will be described following the syntax diagram.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&quot;&gt;&quot; {trigger_type} &quot; &quot; {argument_list} &quot;~&quot; NL</span></p><p class="c3"><span class="c0">{program_command_1} NL</span></p><p class="c3"><span class="c0">{program_command_2} NL</span></p><p class="c3"><span class="c0">{program_command_3} NL</span></p><p class="c3"><span class="c0">. . .</span></p><p class="c3"><span class="c0">{program_command_N} NL</span></p><p class="c3"><span class="c0">&quot;~&quot; NL</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">-- Explanations</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">A TRIGGER_TYPE is one of the available triggers.</span></p><p class="c3"><span class="c0">A PROGRAM_COMMAND can be any legal mud command, or a control flow command.</span></p><p class="c3"><span class="c0">The ARGUMENT_LIST depends upon the trigger, but it is always parsed into the</span></p><p class="c3"><span class="c0">system as a character string.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This is an example of ONE MOBProgram block for a mob.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">-------------------Associating MOBprograms With A Mobile--------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">There is one only way for the mud to associate the program with the</span></p><p class="c3"><span class="c0">mobile. In either case, the result is a link list of mob_programs which are</span></p><p class="c3"><span class="c0">attached to the mobile_prototype. This is done at boot time, and so only one</span></p><p class="c3"><span class="c0">copy is kept, regardless of how many instances of the mobile are running</span></p><p class="c3"><span class="c0">about. This also means that there is no dynamic way to edit or modify the</span></p><p class="c3"><span class="c0">MOBprograms.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Back to how to associate...</span></p><p class="c3"><span class="c0">The method involves a simple in-file approach. In your mobile file</span></p><p class="c3"><span class="c0">in your world directory, at the end of the mobile&#39;s block (i.e. on the line</span></p><p class="c3"><span class="c0">following the typical position/default position/sex line), append any number</span></p><p class="c3"><span class="c0">of MOBprogram blocks (using the syntax above) followed by a line starting</span></p><p class="c3"><span class="c0">with one &#39;|&#39; (pipe).</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Start of Example:</span></p><p class="c3"><span class="c0">#3062</span></p><p class="c3"><span class="c0">fido dog~</span></p><p class="c3"><span class="c0">the beastly fido~</span></p><p class="c3"><span class="c0">A beastly fido is mucking through the garbage looking for food here.</span></p><p class="c3"><span class="c0">~</span></p><p class="c3"><span class="c0">The fido is a small dog that has a foul smell and pieces of rotted meat hanging</span></p><p class="c3"><span class="c0">around his teeth.</span></p><p class="c3"><span class="c0">~</span></p><p class="c3"><span class="c0">161 0 -200 S</span></p><p class="c3"><span class="c0">0 20 10 1d6+4 1d4+0</span></p><p class="c3"><span class="c0">0 25</span></p><p class="c3"><span class="c0">8 8 1</span></p><p class="c3"><span class="c0">&gt;greet_prog 60~</span></p><p class="c3"><span class="c0">if isgood($n)</span></p><p class="c3"><span class="c0">if rand(30)</span></p><p class="c3"><span class="c0">mpechoat $n $I wags $l tail at you.</span></p><p class="c3"><span class="c0">mpechoaround $n $I wags $l tail at $n.</span></p><p class="c3"><span class="c0">endif</span></p><p class="c3"><span class="c0">else</span></p><p class="c3"><span class="c0">growl $n</span></p><p class="c3"><span class="c0">endif~</span></p><p class="c3"><span class="c0">|</span></p><p class="c3"><span class="c0">End of Example.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">--Explanations</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">----------------------------MOBprogram Files----------------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Since it is often useful to have the same MOBprograms affecting several</span></p><p class="c3"><span class="c0">different mobiles, referencing MOBprograms stored in an external file</span></p><p class="c3"><span class="c0">is needed. Using the method above, in place of a true MOBprogram block, one</span></p><p class="c3"><span class="c0">can place the dummy line in the mob file in place of the MOBProgram block(s).</span></p><p class="c3"><span class="c0">CircleMud 2.20 with these modifications expects these programs to be</span></p><p class="c3"><span class="c0">stored under the lib/world/prg directory.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&quot;&gt;&quot; &quot;in_file_prog&quot; {MOBprogram_filename} &quot;~&quot; NL</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Start of Example</span></p><p class="c3"><span class="c0">#3062</span></p><p class="c3"><span class="c0">fido dog~</span></p><p class="c3"><span class="c0">the beastly fido~</span></p><p class="c3"><span class="c0">A beastly fido is mucking through the garbage looking for food here.</span></p><p class="c3"><span class="c0">~</span></p><p class="c3"><span class="c0">The fido is a small dog that has a foul smell and pieces of rotted meat hanging</span></p><p class="c3"><span class="c0">around his teeth.</span></p><p class="c3"><span class="c0">~</span></p><p class="c3"><span class="c0">161 0 -200 S</span></p><p class="c3"><span class="c0">0 20 10 1d6+4 1d4+0</span></p><p class="c3"><span class="c0">0 25</span></p><p class="c3"><span class="c0">8 8 1</span></p><p class="c3"><span class="c0">&gt;in_file_prog greet.prg~</span></p><p class="c3"><span class="c0">|</span></p><p class="c3"><span class="c0">End of Example</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Note there is no list of program_commands as well as no second tilde ~.</span></p><p class="c3"><span class="c0">You can in fact have multiple &gt;in_file_prog blocks, as well as mixing</span></p><p class="c3"><span class="c0">them with in line MOBProg blocks.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">In a file, the syntax is exactly the same as it is for a in_file</span></p><p class="c3"><span class="c0">approach:</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">A list of MOBprogram (NOT including any dummy in_file_prog</span></p><p class="c3"><span class="c0">lines, sorry but recursion was outlawed for simplicity)</span></p><p class="c3"><span class="c0">blocks followed by a line starting with one &#39;|&#39; (pipe).</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">More than one mobile can use the same file and one mobile can call more</span></p><p class="c3"><span class="c0">than one file. Files referenced using the dummy in_file_prog line are</span></p><p class="c3"><span class="c0">placed in the MOBprogram list at the point where the dummy line exists.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">-----------------------------Trigger Types----------------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Triggers are fairly easy to add, but this basic list should hold for</span></p><p class="c3"><span class="c0">most needs. Their names, argument list syntaxes, and translation into</span></p><p class="c3"><span class="c0">more articulate english are given below:</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: in_file_prog &lt;ARGUMENT&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is a single word which is the location of the stored</span></p><p class="c3"><span class="c0">file as referenced from the running directory (MOBProgs).</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: Dummy trigger. Not valid in any file, only for use in loading files</span></p><p class="c3"><span class="c0">from the method described above.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: act_prog [p] &lt;ARGUMENT&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is a list of keywords separated by spaces. If the</span></p><p class="c3"><span class="c0">first word is the character &#39;p&#39; by itself then the rest of the word list is</span></p><p class="c3"><span class="c0">considered to be a phrase. The trigger is activated whenver a keyword (or</span></p><p class="c3"><span class="c0">the phrase) is contained in the act() message. Both the phrase and keywords</span></p><p class="c3"><span class="c0">are case insensitive.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: Most general trigger. Applies to almost every event which happens</span></p><p class="c3"><span class="c0">in the mud. Anytime the function act() is called with a message</span></p><p class="c3"><span class="c0">to be delivered TO_CHAR,TO_VICT,TO_ROOM,etc. the act can be</span></p><p class="c3"><span class="c0">triggered. Basically this will trigger on almost everything</span></p><p class="c3"><span class="c0">you&#39;ll ever want (and some things you wont as well) For example:</span></p><p class="c3"><span class="c0">MOBprogram: &gt;act_prog p pokes you in the ribs.~</span></p><p class="c3"><span class="c0">This trigger will only be activated if a mobile receives a message</span></p><p class="c3"><span class="c0">in which the above five words are found in the exact order and</span></p><p class="c3"><span class="c0">spacing given. Note that the period is needed because the words</span></p><p class="c3"><span class="c0">must be found on their own. This eliminates confusion when the</span></p><p class="c3"><span class="c0">keyword is &#39;hi&#39; and a message with the word &#39;this&#39; is being checked.</span></p><p class="c3"><span class="c0">In CircleMud2.20 with these patches, neither emote nor say can</span></p><p class="c3"><span class="c0">trigger and act_prog, so it can ONLY be triggered by socials (and</span></p><p class="c3"><span class="c0">possibly by an IMPs echo ;)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: speech_prog [p] &lt;ARGUMENT&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is the same as for an act_prog.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: This is only triggered when the keyword or phrase is contained in a</span></p><p class="c3"><span class="c0">message which has been said by a PC in the same room as the mob.</span></p><p class="c3"><span class="c0">The PC restriction is not necessary, but makes infinite loops</span></p><p class="c3"><span class="c0">between two talking mobiles impossible. It also makes it impossible</span></p><p class="c3"><span class="c0">for two NPC&#39;s to stand and discuss the weather however.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: rand_prog &lt;NUMBER&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is a number betweeen 1 and 100 inclusive.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: This trigger is checked at each PULSE_MOBILE and if the argument is</span></p><p class="c3"><span class="c0">greater than a percentage roll the trigger is activated. This</span></p><p class="c3"><span class="c0">will happen even if there is no PC in the room with the mob,</span></p><p class="c3"><span class="c0">but there must be players in the same area.</span></p><p class="c3"><span class="c0">It is useful to give mobiles a bit of a personality. For instance</span></p><p class="c3"><span class="c0">a janitor who stops to spit tobacco, or complain about the hours,</span></p><p class="c3"><span class="c0">or wonder why there are no woman janitors on muds, or a fido which</span></p><p class="c3"><span class="c0">barks or growls or pees on the curb is much more alive than one</span></p><p class="c3"><span class="c0">which just sits there scavenging.</span></p><p class="c3"><span class="c0">This trigger will even be checked when the mobile is fighting,</span></p><p class="c3"><span class="c0">so can provide some confusion if you don&#39;t expect it (for instance</span></p><p class="c3"><span class="c0">an mpecho about a fido peeing on the curb can happy during a fight</span></p><p class="c3"><span class="c0">or even while the mobile is lying mortally wounded!)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: fight_prog &lt;NUMBER&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is a percentage like in rand_prog.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: Useful for giving mobiles combat attitude. It is checked every</span></p><p class="c3"><span class="c0">PULSE_VIOLENCE when the mobile is fighting. Can be used to cast</span></p><p class="c3"><span class="c0">spells, curse at the opponent, or whatever. Only the first successful</span></p><p class="c3"><span class="c0">one will be processed to save time. Also, this means that the</span></p><p class="c3"><span class="c0">mobile wont get lucky and 1. curse, cast a fireball and 2. spit on the</span></p><p class="c3"><span class="c0">player, cast another fireball in the same pulse.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: hitprcnt_prog &lt;NUMBER&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is a percentage.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: Is activated at each PULSE_VIOLENCE when the mobile is fighting. It</span></p><p class="c3"><span class="c0">checks to see if the hitpoints of the mobile are below the given</span></p><p class="c3"><span class="c0">percentage. Multiple hitprcnt_progs should be listed in increasing</span></p><p class="c3"><span class="c0">order of percent since a 40% will always be activated before a 20%</span></p><p class="c3"><span class="c0">and, only the first successful hitprcnt trigger is performed.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: greet_prog &lt;NUMBER&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Again a percentage argument.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: Whenever someone enters the room with the mobile, and the mobile saw</span></p><p class="c3"><span class="c0">the person enter, this is checked. Good for shopkeepers who want</span></p><p class="c3"><span class="c0">to welcome customers, or for pseudo-aggressive mobiles which need to</span></p><p class="c3"><span class="c0">discriminate on who they attack.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: all_greet_prog &lt;NUMBER&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Again a percentage argument.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: Like greet_prog, but it can be triggered even if the mobile didnt</span></p><p class="c3"><span class="c0">see the arrival (i.e. sneak, invis, etc). Most useful for faking</span></p><p class="c3"><span class="c0">teleport rooms (if your mobiles can transfer) or for impassable</span></p><p class="c3"><span class="c0">guardians.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">**NOTE: neither greet_prog is activated if the mobile is fighting.**</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: entry_prog &lt;NUMBER&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Again a percentage argument.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: The opposite of a greet_prog. Whenever the mobile itself enters a new</span></p><p class="c3"><span class="c0">room, this can be triggered. Useful for looking around, or waving</span></p><p class="c3"><span class="c0">or other things that real PCs do when they arrive at a crowded room.</span></p><p class="c3"><span class="c0">Only the first successful one of these is done so the mobile doesn&rsquo;t</span></p><p class="c3"><span class="c0">look stupid by repeating commands resulting from multiple MOBprograms.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: leave_prog &lt;NUMBER&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Again a percentage argument.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: Whenever someone leaves a room with the mobile, and the mobile saw</span></p><p class="c3"><span class="c0">the person leave, this is checked. Good for shopkeepers who want</span></p><p class="c3"><span class="c0">to wave goodbye to customers, or for pseudo-aggressive mobiles which</span></p><p class="c3"><span class="c0">need to stop people from leaving etc. If the person leaving the room</span></p><p class="c3"><span class="c0">is attacked in the trigger, he/she can&#39;t leave the room as intended.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: all_leave_prog &lt;NUMBER&gt; ??</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Again a percentage argument.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: This is just like leave_prog, except it will trigger even if the</span></p><p class="c3"><span class="c0">mobile cannot see the character leaving.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: give_prog &lt;ARGUMENT&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is either the complete name of an object, or the word</span></p><p class="c3"><span class="c0">&#39;all&#39;. A complete name is like: &quot;sword shiny magic&quot; vs &quot;sword&quot;. It</span></p><p class="c3"><span class="c0">is whatever is on the line of the object section following the VNUM.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: This is triggered whenever something is given to the mobile. Best used</span></p><p class="c3"><span class="c0">for quests. Since the first successful trigger is the only one of</span></p><p class="c3"><span class="c0">this type which is processed, having an &quot;all&quot; argument give_prog</span></p><p class="c3"><span class="c0">at the end of the MOBprogram list is essentially a default response.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: bribe_prog &lt;NUMBER&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is any positive integer number.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: This trigger is activated whenever money is given to the mobile. If the</span></p><p class="c3"><span class="c0">amount given exceeds the number, then process the commands. Note</span></p><p class="c3"><span class="c0">again, that an argument of &#39;1&#39; would act as a default response.</span></p><p class="c3"><span class="c0">If money is given to a mobile with this trigger type, instead of the</span></p><p class="c3"><span class="c0">cash being added to mob-&gt;gold, the mobile is instead given a pile of</span></p><p class="c3"><span class="c0">coins in the proper amount. In this way, the mobile can drop the coins</span></p><p class="c3"><span class="c0">or refer to the object by &quot;amount&quot; (short description:&quot;%d gold coins&quot;)</span></p><p class="c3"><span class="c0">This surely has some drawbacks, but it lets the mobile do something</span></p><p class="c3"><span class="c0">with the bribe (NOTE: dropping it and getting it turns it into cash)</span></p><p class="c3"><span class="c0">This can be done sneakily if a NPC-only &quot;at&quot; command exists.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: hour_prog &lt;1-24&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is the clock when the trigger shall activate.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: When the mudhour strikes X (1-24), this trigger is activated.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: ferry_prog &lt;percent&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is a percentage.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: This trigger is activated when a ferry reaches its new destination</span></p><p class="c3"><span class="c0">but before the captain exits the ferry. It is the captain who will</span></p><p class="c3"><span class="c0">act in this prog, not the vessel!</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: page_prog &lt;id&gt; &lt;percent&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&lt;id&gt; is a number to identify the page_prog and percent is the</span></p><p class="c3"><span class="c0">chance it is activated when triggered by mppage.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: This trigger is activated when another mobile uses mppage to</span></p><p class="c3"><span class="c0">trigger it with the same id. See mppage for its syntax.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: death_prog &lt;NUMBER&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The argument is a percent once again.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: When the mobile dies, if the random percentage is less than the argument</span></p><p class="c3"><span class="c0">the mobile performs the MOBprogram commands rather than the usual</span></p><p class="c3"><span class="c0">death_cry sequence. This is done before the corpse is made, so the</span></p><p class="c3"><span class="c0">commands can be considered the mobiles last gasp. It could perhaps</span></p><p class="c3"><span class="c0">destroy the items it was holding, or create some, or cast a spell</span></p><p class="c3"><span class="c0">on the killer and the room, or even goto a new location and die</span></p><p class="c3"><span class="c0">there (with a text message, the corpse would seem to vanish) The</span></p><p class="c3"><span class="c0">position of the mobile is set to STANDING, and so it can do all the</span></p><p class="c3"><span class="c0">normal commands, without worrying about being DEAD. However, even</span></p><p class="c3"><span class="c0">if the mobile restores itself to full hitpoints, it will still die.</span></p><p class="c3"><span class="c0">This is not a way to immortal mobiles. However, the last thing this</span></p><p class="c3"><span class="c0">mobile does could be to goto some vacant room, load a fresh version</span></p><p class="c3"><span class="c0">of itself, drop all its items, force the new mobile to get all the</span></p><p class="c3"><span class="c0">items and wear them, send the new mobile back to the character who</span></p><p class="c3"><span class="c0">killed it and force the new mobile to attack that character. Along</span></p><p class="c3"><span class="c0">with a text message which said the mobile restored itself, this</span></p><p class="c3"><span class="c0">might be a convincing effect. (Note that your kitten could turn into</span></p><p class="c3"><span class="c0">a dragon this way too). Of course this assumes that some NPC</span></p><p class="c3"><span class="c0">commands have been implemented.</span></p><p class="c3"><span class="c0">In the original code, it was impossible to do the &#39;restoration&#39; trick</span></p><p class="c3"><span class="c0">above, however, in this code, it is in fact possible. Try it ;)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: command_word_prog &lt;command&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This mobprog will trigger on the command specified in &lt;command&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: command_phrase_prog &lt;command&gt; &lt;args&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This mobprog will trigger on the command specified in &lt;command&gt;</span></p><p class="c3"><span class="c0">if the argument is the same as specified in &lt;args&gt;.</span></p><p class="c3"><span class="c0">IE: command_phrase_prog open door~</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Note that the first successful bribe_prog, give_prog, hitprcnt_prog,</span></p><p class="c3"><span class="c0">death_prog, fight_prog, rand_prog and entry_prog is the only one which</span></p><p class="c3"><span class="c0">is executed. All the successful greet(_all)_progs, speech_progs, and</span></p><p class="c3"><span class="c0">act_progs will be done. This is the best arrangement we found for handling</span></p><p class="c3"><span class="c0">situations where you imported several MOBprogram files for a mobile. If you</span></p><p class="c3"><span class="c0">are going to write lots of little files and piece them together to create</span></p><p class="c3"><span class="c0">the effect you want, it is advisible to not mix things together all that</span></p><p class="c3"><span class="c0">much, otherwise you have to pay close attention to the order in which the</span></p><p class="c3"><span class="c0">programs are added to the link list.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Also, no MOBprograms will be successful when the mobile is charmed</span></p><p class="c3"><span class="c0">(since it has no self violition, it should act like it has none) to protect</span></p><p class="c3"><span class="c0">mobiles which are given special powers from being implemented by a player.</span></p><p class="c3"><span class="c0">One bug we had in early testing was a player who charmed a mobile and then</span></p><p class="c3"><span class="c0">used its aggressive greet_prog to attack other players.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">------------------------------Variables------------------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">To make things come alive, variables are needed. These are represented</span></p><p class="c3"><span class="c0">in the MOBprograms by using a dollar sign convention as in the socials.</span></p><p class="c3"><span class="c0">When the mud command is processed, these variables are expanded into the</span></p><p class="c3"><span class="c0">values shown below. Usually, it is best to use the short descriptions</span></p><p class="c3"><span class="c0">of mobiles and the names of players when speaking them, but if you are</span></p><p class="c3"><span class="c0">performing an action to someone almost always you want the name. The</span></p><p class="c3"><span class="c0">title field for players is an extra that probably wont often be used.</span></p><p class="c3"><span class="c0">Without further hesitation... the variables:</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">$i the first of the names of the mobile itself.</span></p><p class="c3"><span class="c0">$I the short description of the mobile itself.</span></p><p class="c3"><span class="c0">$n the name of whomever caused the trigger to happen.</span></p><p class="c3"><span class="c0">$N the name and title of whomever caused the trigger to happen.</span></p><p class="c3"><span class="c0">$t the name of a secondary character target (i.e A smiles at B)</span></p><p class="c3"><span class="c0">$T the short description, or name and title of target (NPC vs PC)</span></p><p class="c3"><span class="c0">$r the name of a random char in the room with the mobile (never == $i)</span></p><p class="c3"><span class="c0">$R the short description, or name and title of the random char</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">$j he,she,it based on sex of $i.</span></p><p class="c3"><span class="c0">$e he,she,it based on sex of $n.</span></p><p class="c3"><span class="c0">$E he,she,it based on sex of $t.</span></p><p class="c3"><span class="c0">$J he,she,it based on sex of $r.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">$k him,her,it based on sex of $i.</span></p><p class="c3"><span class="c0">$m him,her,it based on sex of $n.</span></p><p class="c3"><span class="c0">$M him,her,it based on sex of $t.</span></p><p class="c3"><span class="c0">$K him,her,it based on sex of $r.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">$l his,hers,its based on sex of $i.</span></p><p class="c3"><span class="c0">$s his,hers,its based on sex of $n.</span></p><p class="c3"><span class="c0">$S his,hers,its based on sex of $t.</span></p><p class="c3"><span class="c0">$L his,hers,its based on sex of $r.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">$o the first of the names of the primary object (i.e A drops B)</span></p><p class="c3"><span class="c0">$O the short description of the primary object</span></p><p class="c3"><span class="c0">$p the first of the names of the secondary object (i.e A puts B in C)</span></p><p class="c3"><span class="c0">$P the short description of the secondary object</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">$a a,an based on first character of $o</span></p><p class="c3"><span class="c0">$A a,an based on first character of $p</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Also, in if_checks, the accepted variables are the basic ones</span></p><p class="c3"><span class="c0">(i,n,t,r,o,p). If a variable is referenced that doesn&rsquo;t exist, then the value</span></p><p class="c3"><span class="c0">is simply left blank. (i.e referring to $o when the trigger is: A kisses B)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The only problem with the variables is that the secondary object and</span></p><p class="c3"><span class="c0">the secondary target are passed by act() in the same location. This means that</span></p><p class="c3"><span class="c0">if you reference $t in an A puts B in C situation, the result will probably</span></p><p class="c3"><span class="c0">be a happy mud crash or some weird side effect, especially if $t is used in</span></p><p class="c3"><span class="c0">an if_check (i.e. if isnpc($t) in the above situation) The basic fix for this</span></p><p class="c3"><span class="c0">is to change everyone who calls the act() procedure to specify a secondary</span></p><p class="c3"><span class="c0">object and a secondary character. But that is a fairly comprehensive trivial</span></p><p class="c3"><span class="c0">twiddle, so we left it the way it is so that, you aren&rsquo;t forced to make all</span></p><p class="c3"><span class="c0">those twiddles to use the MOBprograms.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">---------------------------Control Flow Syntax------------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">In place of any legal mud command in a MOBprogram, one can substitute a</span></p><p class="c3"><span class="c0">flow of control command. Here is the syntax for a flow of control command.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&quot;if&quot; &quot; &quot; {if_check_1} &quot;(&quot; {argument} &quot;)&quot; [ {operator} {value} ] NL</span></p><p class="c3"><span class="c0">[ &quot;or&quot; &quot; &quot; {if_check_2} &quot;(&quot; {argument} &quot;)&quot; [ {operator} {value} ] NL ]</span></p><p class="c3"><span class="c0">. . .</span></p><p class="c3"><span class="c0">[ &quot;or&quot; &quot; &quot; {if_check_N} &quot;(&quot; {argument} &quot;)&quot; [ {operator} {value} ] NL ]</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">[ {program_command_1} NL ]</span></p><p class="c3"><span class="c0">[ {program_command_2} NL ]</span></p><p class="c3"><span class="c0">. . .</span></p><p class="c3"><span class="c0">[ &quot;break&quot; NL ]</span></p><p class="c3"><span class="c0">. . .</span></p><p class="c3"><span class="c0">[ {program_command_N} NL ]</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">[ &quot;else&quot; NL ]</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">[ {program_command_1} NL ]</span></p><p class="c3"><span class="c0">[ {program_command_2} NL ]</span></p><p class="c3"><span class="c0">. . .</span></p><p class="c3"><span class="c0">[ &quot;break&quot; NL ]</span></p><p class="c3"><span class="c0">. . .</span></p><p class="c3"><span class="c0">[ {program_command_N} NL ]</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&quot;endif&quot; NL</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Basically, it is: an &#39;if&#39; line, followed by zero or more &#39;or&#39; lines,</span></p><p class="c3"><span class="c0">followed by zero or more legal mud commands, which may contain a &#39;break&#39; line,</span></p><p class="c3"><span class="c0">possibly followed by an &#39;else&#39; line , followed by zero or more legal mud</span></p><p class="c3"><span class="c0">commands, which may contain a &#39;break&#39; line, followed by an &#39;endif&#39; line.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The only new syntax labels are all in the IF line:</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">--Explanations</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">An IF_CHECK is a string which describes under what context to compare things.</span></p><p class="c3"><span class="c0">The ARGUMENT is the reference point from which the LHS of an expression comes.</span></p><p class="c3"><span class="c0">The OPERATOR indicates how the LHS and RHS are going to be compared.</span></p><p class="c3"><span class="c0">The VALUE is the RHS of the expression to be compared by the operator.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The BREAK command bails out of the entire MOBprogram regardless of the</span></p><p class="c3"><span class="c0">level if nesting.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">If that looks confusing, skip to the end of the document and review the</span></p><p class="c3"><span class="c0">Example. Hopefully that should clear things, otherwise you&#39;ll probably have</span></p><p class="c3"><span class="c0">to give us a mail since examples are the best way we know to explain syntax.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">--------------------------------Operators-----------------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Most of the basic numeric operators are legal and perform the same</span></p><p class="c3"><span class="c0">function as in C. The string operators are a bit more confusing. There are</span></p><p class="c3"><span class="c0">negative versions of some of the operators. These are not strictly needed,</span></p><p class="c3"><span class="c0">since the if/else construct of Control Flow commands can handle either case.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Numeric Operators: == != &gt; &lt; &gt;= &lt;= &amp; | String Operators: == != / !/</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">For strings, == and != check for exact match between the two strings</span></p><p class="c3"><span class="c0">and the other two, / and !/ check to see if the second string is contained in</span></p><p class="c3"><span class="c0">the first one. This is so things like: if name($n) / guard will respond</span></p><p class="c3"><span class="c0">true to &quot;cityguard&quot; &quot;guard&quot; &quot;guardian&quot; etc. Using == on a name implies</span></p><p class="c3"><span class="c0">that you are matching the complete name &quot;cityguard guard&quot; or whatever.</span></p><p class="c3"><span class="c0">The string operators are case SENSITIVE.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">------------------------If_Checks In Control Flow---------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The provided list of if_checks and their arguments are below. They</span></p><p class="c3"><span class="c0">should all be fairly obvious in what they do, but some of the more obtuse</span></p><p class="c3"><span class="c0">deserve a slight explanation. Any &#39;==&#39; operator can be replaced with any of the</span></p><p class="c3"><span class="c0">available ones described above. The argument ($*) refers to any of the</span></p><p class="c3"><span class="c0">variables which make sense for that if_check (i.e. for an if_check which is</span></p><p class="c3"><span class="c0">referencing a person the only valid variables would be $i, $n, $t or $r)</span></p><p class="c3"><span class="c0">A value type of string is a sequence of characters. It does not need to be</span></p><p class="c3"><span class="c0">included in quotes or anything like that (i.e. name($n)== orc large brown)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c1">rand(num) &nbsp;</span><span class="c0">&nbsp; &nbsp; Is random percentage less than or equal to num</span></p><p class="c3 c7"><span class="c5">50% chance to bark at </span></p><p class="c3 c7"><span class="c5">&gt;&gt; if rand(50)</span></p><p class="c3 c7"><span class="c5">&gt;&gt; &nbsp;bark $n</span></p><p class="c3 c7"><span class="c5">&gt;&gt; endif</span></p><p class="c3"><span class="c1">isnpc($*) </span><span class="c0">&nbsp; &nbsp; &nbsp;Is $* an NPC</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c1">ispc($*) &nbsp; </span><span class="c0">&nbsp; &nbsp; Is $* a PC</span></p><p class="c3"><span class="c1">isgood($*) &nbsp;</span><span class="c0">&nbsp; &nbsp;Does $* have a good alignment(also works for isevil and isneutral)</span></p><p class="c3"><span class="c1">isfight($*) </span><span class="c0">&nbsp; &nbsp;Is $* fighting</span></p><p class="c3"><span class="c1">ishunt($*)</span><span class="c0">&nbsp; &nbsp; Is $* hunting</span></p><p class="c3"><span class="c1">isimmort($*)</span><span class="c0">&nbsp;Is the level of $* greater than max_mortal</span></p><p class="c3"><span class="c1">ischarmed($*)</span><span class="c0">&nbsp;Is $* affected by charm</span></p><p class="c3"><span class="c1">isfollow($*)</span><span class="c0">&nbsp;Is $* a follower with their master in the room</span></p><p class="c3"><span class="c1">isaffected($*)</span><span class="c0">&nbsp;&amp; integer Is ($*-&gt;affected_by &amp; integer) true</span></p><p class="c3"><span class="c0">(person only)</span></p><p class="c3"><span class="c1">isleader($*)</span><span class="c0">&nbsp;Is $* the leader or soloing (no master)</span></p><p class="c3"><span class="c1">isgrouped($*)</span><span class="c0">&nbsp;Is $* grouped (regardless of where group is)</span></p><p class="c3"><span class="c1">inquest($*)</span><span class="c6">&nbsp;</span><span class="c1">== &lt;num&gt;</span><span class="c0">&nbsp;Is $* in quest &lt;num&gt;</span></p><p class="c3"><span class="c1">inmerc($*)</span><span class="c6">&nbsp;</span><span class="c1">== &lt;num&gt;</span><span class="c0">&nbsp;Is $* in team &lt;num&gt;</span></p><p class="c3"><span class="c1">exit(north|east|south|west|up|down)</span><span class="c6">&nbsp;</span><span class="c1">== integer</span><span class="c0">&nbsp;Is there exit to room integer</span></p><p class="c3"><span class="c1">hitprcnt($*) == percent</span><span class="c0">&nbsp;Is the hit/max_hit of $* equal to percent</span></p><p class="c3"><span class="c4 c1">inroom($*) == [integer | $i | $n | $t | $r]</span></p><p class="c3"><span class="c0">Is the room of $* equal to integer or other</span></p><p class="c3"><span class="c0">person. (person only)</span></p><p class="c3"><span class="c1">sex($*) == integer</span><span class="c0">&nbsp;Is the sex of $* equal to integer</span></p><p class="c3"><span class="c1">position ($*) == integer </span><span class="c0">Is the position of $* equal to integer</span></p><p class="c3"><span class="c0">(1 dead, 2 morted, 3 incap, 4 stunned, 5 sleep, 6 rest, 7 sitting, 8 fighting, 9 standing, 10 flying)</span></p><p class="c3"><span class="c1">level($*) == integer</span><span class="c0">&nbsp;Is the level of $* equal to integer</span></p><p class="c3"><span class="c1">class($*) == integer</span><span class="c0">&nbsp;Is the class of $* equal to integer</span></p><p class="c3"><span class="c0">(1 mage, 2 priest, 3 rogue, 4 fighter, 5 warlock, 6 animist, 7 nightblade, 8 templar)</span></p><p class="c3"><span class="c1">goldamt($*) == integer</span><span class="c0">&nbsp;Does $* have a gold total equal to integer</span></p><p class="c3"><span class="c1">objtype($*) == integer</span><span class="c0">&nbsp;Is the type of $* equal to integer</span></p><p class="c3"><span class="c0">(armor,boat,etc)</span></p><p class="c3"><span class="c1">objval#($*) == integer</span><span class="c0">&nbsp;Is $*-&gt;value[#] equal to integer (# from 0-3)</span></p><p class="c3"><span class="c1">number($*) == integer</span><span class="c0">&nbsp;Is the vnum of $* equal to integer</span></p><p class="c3"><span class="c1">name($*) == string</span><span class="c0">&nbsp;Is the name of $* equal to string</span></p><p class="c3"><span class="c1">iswearing($*) == </span><span class="c0">integer Is $* wearing item equal to integer</span></p><p class="c3"><span class="c1">str($*) ==</span><span class="c0">&nbsp;integer Is the strength of $* equal to integer</span></p><p class="c3"><span class="c1">int($*) ==</span><span class="c0">&nbsp;integer Is the intelligence of $* equal to integer</span></p><p class="c3"><span class="c1">wis($*) ==</span><span class="c0">&nbsp;integer Is the wisdom of $* equal to integer</span></p><p class="c3"><span class="c1">dex($*) ==</span><span class="c0">&nbsp;integer Is the dexterity of $* equal to integer</span></p><p class="c3"><span class="c1">con($*) ==</span><span class="c0">&nbsp;integer Is the constitution of $* equal to integer</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">NOTE: There are some fairly interesting and possibly useful ones not on this</span></p><p class="c3"><span class="c0">list, and the might or might not get added in later days. Please send any</span></p><p class="c3"><span class="c0">that YOU add to me, or to the circle@marble.bu.edu mailing list.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">------------------------MOBCommands Of Interest-----------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">These are fairly basic things, most of them are wiz commands which have</span></p><p class="c3"><span class="c0">been changed to allow for mobiles to perform the commands. If you have the</span></p><p class="c3"><span class="c0">problem of immortals abusing these powers on your mud either ditch the</span></p><p class="c3"><span class="c0">immortals, or add a check in all of them to only let NPC&#39;s with null</span></p><p class="c3"><span class="c0">descriptors do the commands. (However, you lose a little debugging help that</span></p><p class="c3"><span class="c0">way). MERC 2.2 has provided a little security feature against this but</span></p><p class="c3"><span class="c0">it is by no means comprehensive. Please check yourself if you are concerned.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Here are the basic MOBcommands that we found to be enticing:</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPSTAT &lt;mobile&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Shows the MOBprograms which are set on the mob of the given name or</span></p><p class="c3"><span class="c0">vnum and some basic stats for the mobile</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPASOUND &lt;text_string&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Prints the text string to the rooms around the mobile in the same</span></p><p class="c3"><span class="c0">manner as a death cry. This is really useful for powerful aggressives</span></p><p class="c3"><span class="c0">and is also nice for wandering minstrels or mobiles like that in</span></p><p class="c3"><span class="c0">concept.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c1 c4">Syntax: MPJUNK &lt;object&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Destroys the object refered to in the mobiles inven. It prints no</span></p><p class="c3"><span class="c0">message to the world and you can do things like junk all.bread or</span></p><p class="c3"><span class="c0">junk all. This is nice for having janitor mobiles clean out their</span></p><p class="c3"><span class="c0">inventory if they are carrying too much (have a MOBprogram trigger on</span></p><p class="c3"><span class="c0">the &#39;full inventory&#39;)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c6">Syntax: </span><span class="c4 c1">MPECHO &lt;text_string&gt;</span></p><p class="c3"><span class="c4 c1">&nbsp; &nbsp; &nbsp; &nbsp; MPECHOAT &lt;victim&gt; &lt;text_string&gt;</span></p><p class="c3"><span class="c4 c1">&nbsp; &nbsp; &nbsp; &nbsp; MPECHOAROUND &lt;victim&gt; &lt;text_string&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Prints the text message to the room of the mobile. The three options</span></p><p class="c3"><span class="c0">let you tailor the message to goto victims or to do things sneaky</span></p><p class="c3"><span class="c0">like having a merchant do: mpat guard mpechoat guard rescue_please</span></p><p class="c3"><span class="c0">This coupled with a guard act_prog trigger on rescue_please to</span></p><p class="c3"><span class="c0">mpgoto $n and mpecho $I has arrived. It is an affective way of quickly</span></p><p class="c3"><span class="c0">bringing guards to the scene of an attack.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPMLOAD &lt;vnum&gt;</span></p><p class="c3"><span class="c4 c1">&nbsp; &nbsp; &nbsp; &nbsp; MPOLOAD &lt;vnum&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Loads the obj/mobile into the inven/room of the mobile. Even if the</span></p><p class="c3"><span class="c0">item is non-takable, the mobile will receive it in the inventory.</span></p><p class="c3"><span class="c0">This lets a mobile distribute a quest item or load a key or something.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPKILL &lt;victim&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Lets a mobile kill a player without having to murder and be fifth</span></p><p class="c3"><span class="c0">level. Lots of MOBprograms end up with mpkill $n commands floating</span></p><p class="c3"><span class="c0">around. It works on both mobiles and players.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPPURGE [argument]</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Destroys the argument from the room of the mobile. Without an argument</span></p><p class="c3"><span class="c0">the result is the cleansing of all NPC&#39;s and items from the room with</span></p><p class="c3"><span class="c0">the exception of the mobile itself. However, mppurge $i will indeed</span></p><p class="c3"><span class="c0">purge the mobile, but it MUST be the last command the mobile tries to</span></p><p class="c3"><span class="c0">do, otherwise the mud cant reference the acting mobile trying to do the</span></p><p class="c3"><span class="c0">commands and bad things happen.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPGOTO &lt;dest&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Moves the mobile to the room or mobile or object requested. It makes</span></p><p class="c3"><span class="c0">no message of its departure or of its entrance, so these must be</span></p><p class="c3"><span class="c0">supplied with mpecho commands if they are desired.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPAT &lt;dest&gt; &lt;command&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Perfoms the command at the designated location. Very useful for doing</span></p><p class="c3"><span class="c0">magic slight of hand tricks that leave players dumbfounded.. such as</span></p><p class="c3"><span class="c0">metamorphing mobiles, or guard summoning, or corpse vanishing.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPTRANSFER &lt;victim&gt; [dest]</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Sends the victim to the destination or to the room of the mobile as a</span></p><p class="c3"><span class="c0">default. if the victim is &quot;all&quot; then all the characters in the room</span></p><p class="c3"><span class="c0">of the mobile are transfered to the destination. Good for starting</span></p><p class="c3"><span class="c0">quests or things like that. There is no message given to the player</span></p><p class="c3"><span class="c0">that it has been transfered and the player doesnt do a look at the</span></p><p class="c3"><span class="c0">new room unless the mob forces them to. Immortals cannot be tranfered.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPFORCE &lt;victim&gt; &lt;command&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Forces the victim to do the designated command. The victim is not told</span></p><p class="c3"><span class="c0">that they are forced, they just do the command so usually some mpecho</span></p><p class="c3"><span class="c0">message is nice. You can force players to remove belongings and give</span></p><p class="c3"><span class="c0">them to you, etc. The player sees the normal command messages (such as</span></p><p class="c3"><span class="c0">removing the item and giving it away in the above example) Again, if</span></p><p class="c3"><span class="c0">the victim is &quot;all&quot; then everyone in the mobiles room does the command.</span></p><p class="c3"><span class="c0">This cannot be used on immortals.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Here are the extra Burning mobile commands:</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPPAUSE &lt;how many ticks to pause&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Burning has added the fourth dimension &#39;time&#39; to the original mobprog</span></p><p class="c3"><span class="c0">code. As a result of this, on Burning each mob command is performed</span></p><p class="c3"><span class="c0">once per mob tick, whereas on standard mobprog muds all commands are</span></p><p class="c3"><span class="c0">performed instantly. If you want the mobile to pause while performing</span></p><p class="c3"><span class="c0">its commands, you can use the mppause command to specify how many mob-</span></p><p class="c3"><span class="c0">ticks the mobile should pause before performing the next command in the</span></p><p class="c3"><span class="c0">list.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPHOUR &lt;hour to wait for&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Burning has added the fourth dimension &#39;time&#39; to the original mobprog</span></p><p class="c3"><span class="c0">code. As a result of this, on Burning each mob command is performed</span></p><p class="c3"><span class="c0">once per mob tick, whereas on standard mobprog muds all commands are</span></p><p class="c3"><span class="c0">performed instantly. If you want the mobile to wait for a certain hour</span></p><p class="c3"><span class="c0">before resuming the commands, you can use mphour with the hour to wait</span></p><p class="c3"><span class="c0">for.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPDAY &lt;day to wait for&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This command works like mphour with the difference that the mobile</span></p><p class="c3"><span class="c0">waits for a certain day before resuming the commands.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPFLUSH</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This command is very useful when writing complex mobprogs that allows</span></p><p class="c3"><span class="c0">the mob to change its course of action. When executing mpflush, the mobile</span></p><p class="c3"><span class="c0">throws away any pending commands. You can then add new commands that will</span></p><p class="c3"><span class="c0">be executed next. It is perfectly ok to call mpflush on a mobile that does</span></p><p class="c3"><span class="c0">not have any pending commands just to make sure it doesn&#39;t.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPWALK &lt;virtual room number of desired destination&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This very powerful command is used to have the mobile walking around in</span></p><p class="c3"><span class="c0">the mud without any prior knowledge of its whereabouts or the path to</span></p><p class="c3"><span class="c0">a specific room. By simply adding a mpwalk command followed by a virtual</span></p><p class="c3"><span class="c0">room number, the mobile will try to walk to that room always choosing the</span></p><p class="c3"><span class="c0">shortest path. The next command will not be executed until the mobile has</span></p><p class="c3"><span class="c0">reached its desired destination.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPSTOP</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This command clears the hunt list, i.e. the mob will no longer hunt for</span></p><p class="c3"><span class="c0">a certain room or player.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPZIP</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Do nothing. This command is use to simulate the NOT command, e.g.:</span></p><p class="c3"><span class="c0">if(ishunt($i))</span></p><p class="c3"><span class="c0">mpzip</span></p><p class="c3"><span class="c0">else</span></p><p class="c3"><span class="c0">sing</span></p><p class="c3"><span class="c0">endif</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPWAIT &lt;victim&gt; &lt;duration&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Causes the victim of the mpwait command to suffer a waitstate before</span></p><p class="c3"><span class="c0">any further action is carried out. Duration is in combat pulses and is</span></p><p class="c3"><span class="c0">of the xDy+z variety.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPPAGE &lt;room number&gt; &lt;mobile name | virtual number&gt; &lt;id&gt;</span></p><p class="c3"><span class="c6">d</span></p><p class="c3"><span class="c0">room number can be: 0 - activate mobs in this room only.</span></p><p class="c3"><span class="c0">-1 - activate mobs in any room (the world)</span></p><p class="c3"><span class="c0">&lt;room&gt; - activate mobs in &lt;room&gt; only.</span></p><p class="c3"><span class="c0">mobile name | num: x.guard, guard, or virtual number.</span></p><p class="c3"><span class="c0">id: an integer matching the page_prog id.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">If the second argument, mobile name or number, is a number then all</span></p><p class="c3"><span class="c0">mobiles with that virtual number in the &#39;room&#39; are paged. If a mobile</span></p><p class="c3"><span class="c0">has a page_prog with an &lt;id&gt; that matches the mppage, that mobprog is</span></p><p class="c3"><span class="c0">activated. Examples:</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">mppage -1 3067 1 - activate all mobs with vnum 3067 in the world</span></p><p class="c3"><span class="c0">that have a page_prog with id 1.</span></p><p class="c3"><span class="c0">mppage 0 3067 1 - activate all mobs in this room only with vnum</span></p><p class="c3"><span class="c0">3067 and id 1.</span></p><p class="c3"><span class="c0">mppage 0 2.guard 1 - only activate 2.guard in this room if he has</span></p><p class="c3"><span class="c0">id 1.</span></p><p class="c3"><span class="c0">mppage 3046 guard 2 - activate the first guard in room 3046 with id</span></p><p class="c3"><span class="c0">2.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: @ &lt;original command&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Sometimes one wants the mobile to perform commands faster than one</span></p><p class="c3"><span class="c0">command per tick. This is possible by adding the @ character in front of</span></p><p class="c3"><span class="c0">the normal command. When using the @ character in front of a command, the</span></p><p class="c3"><span class="c0">next one will be performed instantly (just like on the original mobprog).</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Example:</span></p><p class="c3"><span class="c0">@smile</span></p><p class="c3"><span class="c0">say Hi, welcome to my humble place!</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Will cause the mobile to smile followed by an instant &#39;say&#39;. You can call</span></p><p class="c3"><span class="c0">any command after the @ sign, including mobprog commands.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPWEAR &lt;victim&gt; &lt;subcmd&gt; &lt;object&gt; ...</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Victim will switch equipment, old equipment gets autoremoved.</span></p><p class="c3"><span class="c0">(except NOREMOVE items)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Example:</span></p><p class="c3"><span class="c0">@mpwear $n wield sword</span></p><p class="c3"><span class="c0">or @mpwear $n wear helm</span></p><p class="c3"><span class="c0">or @mpwear $n wear helm head</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPBOND &lt;victim&gt; &lt;object&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Set unique_id number for item with bond flag.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Example:</span></p><p class="c3"><span class="c0">@mpbond $n sword</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">- Object gets victim&#39;s unique_id only if mob can_see object in</span></p><p class="c3"><span class="c0">victim&#39;s inventory.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPADDREP &lt;victim&gt; &lt;value&gt; &lt;group| &gt; &lt;silent| &gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Victim gets &lt;value&gt; rep points. Argument &#39;group&#39; affects all</span></p><p class="c3"><span class="c0">group members; silent is without info.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Example:</span></p><p class="c3"><span class="c0">@mpaddrep $n 20</span></p><p class="c3"><span class="c0">- Victim gets 20 rep points.</span></p><p class="c3"><span class="c0">@mpaddrep $n 20 group</span></p><p class="c3"><span class="c0">- All members in victim&rsquo;s group get 20 rep points.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">Syntax: MPDAMAGE &lt;target OR target-type&gt; &lt;damdice&gt; [damtype] [damflags] [savemod]</span></p><p class="c2"><span class="c4 c1"></span></p><p class="c3"><span class="c0">This is a mobprog command used to cause damage to a player.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">It takes at least 2 arguments, with an optional 3 more.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Usage:</span></p><p class="c3"><span class="c0">mpdamage &lt;target OR target-type&gt; &lt;damdice&gt; [damtype] [damflags] [savemod]</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Argument description:</span></p><p class="c3"><span class="c0">&lt;target OR target-type&gt; is either the name of a player/mob ($n usually)</span></p><p class="c3"><span class="c0">or one of the following: &quot;all&quot; will damage everyone in room, &quot;allm&quot;</span></p><p class="c3"><span class="c0">will damage all mobiles in room, and &quot;allp&quot; will damage all players.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&lt;damdice&gt; is a standard damage dice format, such as 5d200.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">[damtype] is optional and is any standard MUD damage type, such as crush,</span></p><p class="c3"><span class="c0">slash, spell, etc.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">[damflags] is optional and is a bitvector field, which can take the</span></p><p class="c3"><span class="c0">following flags: Negate Sanctuary (1), No Maxdam (2).</span></p><p class="c3"><span class="c0">As it is a bitvector, to get multiple flags, you add the number of</span></p><p class="c3"><span class="c0">each flag together. So a mpdamage command which has negate sanctuary</span></p><p class="c3"><span class="c0">and no max damage would have a damflag value of 3.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">[savemod] is the modifier to saving throws that the target receives.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Example:</span></p><p class="c3"><span class="c0">mpdamage allp 5d200 spell 1 0</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This would damage all players in the room with a dice of 5d200, the</span></p><p class="c3"><span class="c0">damage would negate sanctuary, and be of a &#39;spell&#39; damage type.</span></p><p class="c2"><span class="c4 c1"></span></p><p class="c3"><span class="c1">MPINFO &lt;message&gt; </span><span class="c0">- send a custom info kill message</span></p><p class="c3"><span class="c0">&nbsp;note: mpinfo only works in combination with mpdamage, and must be placed BEFORE the mpdamage command.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c4 c1">MPEXIT &lt;north|east|south|west|up|down&gt; &lt;target room&gt; [flags] [exit descr]</span></p><p class="c3"><span class="c0">&nbsp;where &lt;target room&gt; is the target room&#39;s vnum, [flags] are optional exit</span></p><p class="c3"><span class="c0">&nbsp;flags, and [exit descr] is an optional exit description.</span></p><p class="c3"><span class="c0">&nbsp;Example: MPEXIT north 50001 SECRET ANTI-GOOD This is a secret anti-good exit.</span></p><p class="c3"><span class="c0">&nbsp;Note: Previous exit will be replaced. Use &lt;target room&gt; -1 to remove exit.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c1">MPAFFECT &lt;target&gt; &lt;spell&gt; &lt;duration&gt; </span><span class="c6">-</span><span class="c0">&nbsp;add spell affect to target mob/player</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c1">MPHEAL &lt;target&gt; XdY+Z</span><span class="c0">&nbsp;- heals target for XdY+Z hitpoints</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">--------------------------Regarding CPU Slowdown------------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">We have no real idea how slow this makes a mud. However, you will find</span></p><p class="c3"><span class="c0">that if you are judicious with your use of MOBprograms, you can either do</span></p><p class="c3"><span class="c0">little damage, or even reduce the effort on your server! This means that</span></p><p class="c3"><span class="c0">mobile polling (including the rand_progs) need only be checked when players</span></p><p class="c3"><span class="c0">are around. This reduces computation of random_stuff a little, but it is</span></p><p class="c3"><span class="c0">still a polling method, and subject to a basic inefficiency there. However,</span></p><p class="c3"><span class="c0">aside from the rand_progs, the only additional slowdowns will be when the</span></p><p class="c3"><span class="c0">mobile is responding to the situation, and you would get that from a special</span></p><p class="c3"><span class="c0">procedure as well (although MOBprograms are surely not as efficient as</span></p><p class="c3"><span class="c0">compiled C code)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">For those who are afraid that MOBprograms will drown their CPU, here is a</span></p><p class="c3"><span class="c0">brazen suggestion which could put you a bit more at ease. Instead of having</span></p><p class="c3"><span class="c0">aggressive mobiles, try the following MOBprogram block on all would be</span></p><p class="c3"><span class="c0">aggressives.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&gt;greet_prog 100~</span></p><p class="c3"><span class="c0">if ispc($n)</span></p><p class="c3"><span class="c0">if isimmort($n)</span></p><p class="c3"><span class="c0">bow $n</span></p><p class="c3"><span class="c0">else</span></p><p class="c3"><span class="c0">mkill $n</span></p><p class="c3"><span class="c0">endif</span></p><p class="c3"><span class="c0">endif</span></p><p class="c3"><span class="c0">~</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This has the effect of making the mobile attack the FIRST visable</span></p><p class="c3"><span class="c0">mortal player who walks into the room.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">What this should allow, is to comment out the aggressive mobile check</span></p><p class="c3"><span class="c0">section of the code and thus reduce computation by a bunch. There is no</span></p><p class="c3"><span class="c0">continuous polling through all the mobiles in occupied zones and checking to</span></p><p class="c3"><span class="c0">see if there is an NPC aggressor and a PC victim. There is also no need to</span></p><p class="c3"><span class="c0">worry about players skipping through aggressives, since the trigger catches</span></p><p class="c3"><span class="c0">folk as soon as they enter the room.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Note that the price paid for this, was that if a second player</span></p><p class="c3"><span class="c0">walked in during the combat, and the first character fled, the mobile won&#39;t</span></p><p class="c3"><span class="c0">realize that there is a new target. So, a compromise would be adding a</span></p><p class="c3"><span class="c0">rand_prog which had the mobile appear to peer around the room and then do an</span></p><p class="c3"><span class="c0">mkill $r.</span></p><p class="c3"><span class="c0">AHA! you say, we are back to polling. Well true, but since mobile_update</span></p><p class="c3"><span class="c0">is called anyway (at 1/16 the frequency of aggr_update in default Merc 2.0)</span></p><p class="c3"><span class="c0">and we only add an if check, a walk of a short link_list and the MOBprogram</span></p><p class="c3"><span class="c0">execution itself, we have still reduced the aggr_update stuff by major amounts.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">-------------------------Miscellaneous Information----------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">There is really no limit to the number of MOBprograms a given mobile</span></p><p class="c3"><span class="c0">can have. However, the length of a single command block is limited by the</span></p><p class="c3"><span class="c0">value of MAX_STRING_LENGTH. In my version it was around 4k, so that is</span></p><p class="c3"><span class="c0">probably about 100 lines. The indentation spaces shown in the example</span></p><p class="c3"><span class="c0">above are NOT required, but do make it easier to read (and debug)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The MOBprogram stuff runs totally without anything in the</span></p><p class="c3"><span class="c0">mob_commands.c file, but letting mobiles be a bit more godlike has allowed</span></p><p class="c3"><span class="c0">us to do what we consider to be wonderful things. The replicant and</span></p><p class="c3"><span class="c0">polymorphing mobiles described above as well as some nifty mob helping mob</span></p><p class="c3"><span class="c0">interactions are an example.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">It IS possible to accidentally make mobiles which can trigger in</span></p><p class="c3"><span class="c0">loops. As mentioned in the example at the end of this document, the result is</span></p><p class="c3"><span class="c0">usually a mud crash or major CPU dent. We dont know any way to prevent this</span></p><p class="c3"><span class="c0">from happening, other than careful coding and a restriction of mobile travel</span></p><p class="c3"><span class="c0">from zones of one creator to another (another good reason to not have charmed</span></p><p class="c3"><span class="c0">mobiles do anything). Tracking down the culprit mobile is not always easy.</span></p><p class="c3"><span class="c0">The only thing we have found which always works, is to add a log statement</span></p><p class="c3"><span class="c0">into the MOBprogram driver and fill some disk space until it becomes apparent</span></p><p class="c3"><span class="c0">what commands are repetitively issued. Also, most infinite loops are flukes</span></p><p class="c3"><span class="c0">where the situation just happens to be right and usually it never happens</span></p><p class="c3"><span class="c0">again.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The list of variables and triggers and if_checks will grow</span></p><p class="c3"><span class="c0">continuously as our creators demand the ability to do certain things. If you</span></p><p class="c3"><span class="c0">have a request or if you have a new one, we don&#39;t mind hearing about them,</span></p><p class="c3"><span class="c0">and if you find bugs, we shall gladly attempt to squash them for you. As</span></p><p class="c3"><span class="c0">additions or fixes are made, the code will occasionally be redistributed.</span></p><p class="c3"><span class="c0">However, if you want a current version, please feel free to ask. When the</span></p><p class="c3"><span class="c0">code is redistributed, a file containing the change history from the original</span></p><p class="c3"><span class="c0">release will be provided (when possible) to allow you to patch in the changes</span></p><p class="c3"><span class="c0">with low grief.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">I will be glad to lend advice to someone who is trying to install this for</span></p><p class="c3"><span class="c0">a modified version of Circle 2.20 and if something develops I will be glad to</span></p><p class="c3"><span class="c0">make that public as well.</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">----------------------------Adding New Triggers-----------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">This section explains how to add new triggers.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">All you have to do is to follow these simple steps...</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">1. Add the appropriate #define XXXXX_PROG to structs.h</span></p><p class="c3"><span class="c0">2. Write a trigger procedure at the end of mob_prog.c</span></p><p class="c3"><span class="c0">3. Add the new case in *mprog_type_to_name(...) in mob_cmd.c</span></p><p class="c3"><span class="c0">4. Add a new if statement in mprog_name_to_type(..) in db.c</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">There you have it, a new trigger for your MOBProgram system.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Kahn</span></p><p class="c3"><span class="c0">MERC Industries</span></p><p class="c3"><span class="c0">10/29/93</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Moonchilde</span></p><p class="c3"><span class="c0">jtraub@zso.dec.com</span></p><p class="c3"><span class="c0">06/14/94</span></p><p class="c3"><span class="c0">----------------------------------Credits-----------------------------------</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The reason this code was written was to enhance the playing</span></p><p class="c3"><span class="c0">experience at ThePrincedom (a Merc 2.0 based world scheduled to open in</span></p><p class="c3"><span class="c0">October 1993)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">The original idea for this type of MOBprogram came from playing on:</span></p><p class="c3"><span class="c0">WORLDS of CARNAGE, a dikumud implemented by Robbie Roberts and Aaron Buhr.</span></p><p class="c3"><span class="c0">Aaron (known as Dimwit Flathead the First) was the original author from what</span></p><p class="c3"><span class="c0">I have been told, and I hope he will not be totally offended and angered</span></p><p class="c3"><span class="c0">by my coding and sharing a mimicked version with the world. This version</span></p><p class="c3"><span class="c0">is probably not as good as the original and I do feel remorse for publishing</span></p><p class="c3"><span class="c0">the idea. However, since Carnage has been down for months without a word of</span></p><p class="c3"><span class="c0">information regarding its return, I am glad to let one of the best features</span></p><p class="c3"><span class="c0">live on in future generations of MUDs.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">There are no objections to this code being shared, since, aside from</span></p><p class="c3"><span class="c0">a nuclear destruction of all the Temples of Midgaard (excepting the original</span></p><p class="c3"><span class="c0">one!!), bland mobiles are the greatest bane of Dikumuds today. It would be</span></p><p class="c3"><span class="c0">nice to get a message saying you are using the code just for our references.</span></p><p class="c3"><span class="c0">We shant answer questions from anyone until told where they are using the</span></p><p class="c3"><span class="c0">code. *grin* Since this code is not copyrighted, you of course dont have to</span></p><p class="c3"><span class="c0">do anything we say, but it would be nice of you to put the mobprog help</span></p><p class="c3"><span class="c0">screen into your database. and have mobinfo show up somewhere on a more</span></p><p class="c3"><span class="c0">visable help screen (possibly tagged onto the bottom of credits as a see</span></p><p class="c3"><span class="c0">also...)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">I acknowledge all the work done by the original Diku authors as well as</span></p><p class="c3"><span class="c0">those at Merc Industries and appreciate their willingness to share code.</span></p><p class="c3"><span class="c0">Also, quick thanks to Wraith for doing a little beta-installation testing.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">N&#39;Atas-Ha June, 1993</span></p><p class="c3"><span class="c0">murph@ri.cmu.edu</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">In addition to this DOC file credit section, I&#39;d like to add</span></p><p class="c3"><span class="c0">a thank you to Yaz, Mahatma, Zelda, and the rest of the Marble Mud crew for</span></p><p class="c3"><span class="c0">extensively testing MOBProgram 2.1 for me. You may see MOBPrograms in</span></p><p class="c3"><span class="c0">action as well as their own &quot;flavor&quot; of mud at marble.bu.edu 4000.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Kahn Oct 28th, 1993</span></p><p class="c3"><span class="c0">MERC Industries</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">I have ported this code to CircleMud 2.20 and this DOC file was</span></p><p class="c3"><span class="c0">modified slightly to include information correct with regards to that version</span></p><p class="c3"><span class="c0">of the code. A lot of the references to Merc Specific features or internals</span></p><p class="c3"><span class="c0">were removed. I am indebted however to the MERC Industries folks for</span></p><p class="c3"><span class="c0">providing it in the first place.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Moonchilde Jun 14th, 1994</span></p><p class="c3"><span class="c0">jtraub@zso.dec.com</span></p><p class="c3"><span class="c0">{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}+{+}</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">MOBprogram quick reference to triggers/variables/ifchecks/mobcommands</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">trigger argument and what must happen to activate trigger</span></p><p class="c3"><span class="c0">-----------------------------------------------------------------------------</span></p><p class="c3"><span class="c0">act_prog &nbsp; &nbsp; &nbsp; WORDLIST or P WORD_PHRASE to match from act() to mobile</span></p><p class="c3"><span class="c0">bribe_prog &nbsp; &nbsp; INTEGER amount of minimum gold amount given to mobile</span></p><p class="c3"><span class="c0">entry_prog &nbsp; &nbsp; PERCENT chance to check when mobile moves to a new room</span></p><p class="c3"><span class="c0">give_prog &nbsp; &nbsp; &nbsp;FULL OBJECT NAME or ALL to match when obj given to mobile</span></p><p class="c3"><span class="c0">greet_prog &nbsp; &nbsp; PERCENT chance to check if visible char enters mobile&#39;s room</span></p><p class="c3"><span class="c0">all_greet_prog PERCENT chance to check when any char enters mobile&#39;s room</span></p><p class="c3"><span class="c0">fight_prog &nbsp; &nbsp; PERCENT chance to check at fight_pulse if mobile is fighting</span></p><p class="c3"><span class="c0">hitprcnt_prog &nbsp;PERCENT lower than mobiles hit/max_hit if mobile is fighting</span></p><p class="c3"><span class="c0">death_prog &nbsp; &nbsp; PERCENT chance to check after mobile has been slain</span></p><p class="c3"><span class="c0">rand_prog &nbsp; &nbsp; &nbsp;PERCENT chance to check whenever a PC is in the mobiles zone</span></p><p class="c3"><span class="c0">speech_prog &nbsp; &nbsp;WORDLIST or P WORD_PHRASE to match in dialogue to mobile</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">variable &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mobile &nbsp;actor &nbsp;victim &nbsp;random &nbsp;object &nbsp;2nd_object</span></p><p class="c3"><span class="c0">-----------------------------------------------------------------------------</span></p><p class="c3"><span class="c0">name &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$i &nbsp; &nbsp; &nbsp;$n &nbsp; &nbsp; $t &nbsp; &nbsp; &nbsp;$r &nbsp; &nbsp; &nbsp;$o &nbsp; &nbsp; &nbsp;$p</span></p><p class="c3"><span class="c0">shrt_desc/title &nbsp; &nbsp; &nbsp; $I &nbsp; &nbsp; &nbsp;$N &nbsp; &nbsp; $T &nbsp; &nbsp; &nbsp;$R &nbsp; &nbsp; &nbsp;$O &nbsp; &nbsp; &nbsp;$P</span></p><p class="c3"><span class="c0">he/she/it &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $j &nbsp; &nbsp; &nbsp;$e &nbsp; &nbsp; $E &nbsp; &nbsp; &nbsp;$J &nbsp; &nbsp; &nbsp;-- &nbsp; &nbsp; &nbsp;-- </span></p><p class="c3"><span class="c0">him/her/it &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$l &nbsp; &nbsp; &nbsp;$m &nbsp; &nbsp; $M &nbsp; &nbsp; &nbsp;$L &nbsp; &nbsp; &nbsp;-- &nbsp; &nbsp; &nbsp;--</span></p><p class="c3"><span class="c0">his/hers/its &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;$k &nbsp; &nbsp; &nbsp;$s &nbsp; &nbsp; $S &nbsp; &nbsp; &nbsp;$K &nbsp; &nbsp; &nbsp;-- &nbsp; &nbsp; &nbsp;--</span></p><p class="c3"><span class="c0">a/an &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-- &nbsp; &nbsp; &nbsp;-- &nbsp; &nbsp; -- &nbsp; &nbsp; &nbsp;-- &nbsp; &nbsp; &nbsp;$a &nbsp; &nbsp; &nbsp;$A</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&#39;$&#39;symbol=$$</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">ifcheck argument? meaning</span></p><p class="c3"><span class="c0">-----------------------------------------------------------------------------</span></p><p class="c3"><span class="c1">rand(num)</span><span class="c0">&nbsp; &nbsp; &nbsp; Is a random percentage less than or equal to num</span></p><p class="c3"><span class="c1">isnpc($*)</span><span class="c0">&nbsp; &nbsp; &nbsp; Is $* an NPC</span></p><p class="c3"><span class="c1">ispc($*)</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp;Is $* a PC</span></p><p class="c3"><span class="c1">isgood($*)</span><span class="c0">&nbsp; &nbsp; &nbsp;Does $* have a good alignment</span></p><p class="c3"><span class="c1">isfight($*)</span><span class="c0">&nbsp; &nbsp; Is $* fighting</span></p><p class="c3"><span class="c1">ishunt($*)</span><span class="c0">&nbsp; &nbsp; &nbsp;Is $* hunting</span></p><p class="c3"><span class="c1">isimmort($*)</span><span class="c0">&nbsp; &nbsp;Is the level of $* greater than max_mortal</span></p><p class="c3"><span class="c1">ischarmed($*)</span><span class="c0">&nbsp; Is $* affected by charm</span></p><p class="c3"><span class="c1">isfollow($*)</span><span class="c0">&nbsp; &nbsp;Is $* a follower with their master in the room</span></p><p class="c3"><span class="c1">isleader($*) </span><span class="c0">&nbsp; Is $* a leader with followers in the room?</span></p><p class="c3"><span class="c1">isaffected($*)</span><span class="c0">&nbsp;&amp; integer Is ($*-&gt;affected_by &amp; integer) true (person only)</span></p><p class="c3"><span class="c1">hitprcnt($*) == percent</span><span class="c0">&nbsp;Is the hit/max_hit of $* equal to percent</span></p><p class="c3"><span class="c4 c1">inroom($*) == [integer | $i | $n | $t | $r]</span></p><p class="c3"><span class="c0">Is the room of $* equal to integer or other</span></p><p class="c3"><span class="c0">person. (person only)</span></p><p class="c3"><span class="c1">sex($*) == integer</span><span class="c0">&nbsp;Is the sex of $* equal to integer</span></p><p class="c3"><span class="c1">position($*) == integer</span><span class="c0">&nbsp;Is the position of $* equal to integer</span></p><p class="c3"><span class="c1">level($*) == integer</span><span class="c0">&nbsp;Is the level of $* equal to integer</span></p><p class="c3"><span class="c1">class($*) == integer</span><span class="c0">&nbsp;Is the class of $* equal to integer</span></p><p class="c3"><span class="c1">goldamt($*) == integer</span><span class="c0">&nbsp;Does $* have a gold total equal to integer</span></p><p class="c3"><span class="c1">objtype($*) == integer</span><span class="c0">&nbsp;Is the type of $* equal to integer (armor,boat,etc)</span></p><p class="c3"><span class="c1">objval#($*) == integer</span><span class="c0">&nbsp;Is $*-&gt;value[#] equal to integer (# from 0-3)</span></p><p class="c3"><span class="c1">number($*) == integer</span><span class="c0">&nbsp;Is the vnum of $* equal to integer</span></p><p class="c3"><span class="c1">name($*) == string</span><span class="c0">&nbsp;Is the name of $* equal to string</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">MOBcommand argument_list MOBcommand argument_list</span></p><p class="c3"><span class="c0">-----------------------------------------------------------------------------</span></p><p class="c3"><span class="c0">MPSTAT &lt;mobile&gt;</span></p><p class="c3"><span class="c0">MPJUNK &lt;object&gt;</span></p><p class="c3"><span class="c0">MPECHO &lt;text_string&gt;</span></p><p class="c3"><span class="c0">MPECHOAT &lt;victim&gt; &lt;text_string&gt;</span></p><p class="c3"><span class="c0">MPECHOAROUND &lt;victim&gt; &lt;text_string&gt;</span></p><p class="c3"><span class="c0">MPASOUND &lt;text_string&gt;</span></p><p class="c3"><span class="c0">MPMLOAD &lt;mobile</span></p><p class="c3"><span class="c0">MPOLOAD &lt;object&gt; &lt;level&gt;</span></p><p class="c3"><span class="c0">MPKILL &lt;victim&gt;</span></p><p class="c3"><span class="c0">MPPURGE [argument]</span></p><p class="c3"><span class="c0">MPGOTO &lt;dest&gt;</span></p><p class="c3"><span class="c0">MPAT &lt;dest&gt; &lt;command&gt;</span></p><p class="c3"><span class="c0">MPTRANSFER &lt;dest&gt; [location]</span></p><p class="c3"><span class="c0">MPFORCE &lt;victim&gt; &lt;command&gt;</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">+++ Additional Burning mobprog commands +++</span></p><p class="c3"><span class="c0">MPPAUSE &lt;ticks&gt;</span></p><p class="c3"><span class="c0">MPWALK &lt;virtual room number&gt;</span></p><p class="c3"><span class="c0">MPHOUR &lt;hours&gt;</span></p><p class="c3"><span class="c0">MPDAY &lt;days&gt;</span></p><p class="c3"><span class="c0">MPFLUSH @ &lt;command&gt;</span></p><p class="c3"><span class="c0">MPSTOP -</span></p><p class="c3"><span class="c0">MPZIP -</span></p><p class="c3"><span class="c0">MPWEAR &lt;victim&gt; &lt;subcmd&gt; &lt;obj&gt; &hellip;</span></p><p class="c3"><span class="c0">MPBOND &lt;victim&gt; &lt;object&gt;</span></p><p class="c3"><span class="c0">MPADDREP &lt;victim&gt; &lt;value&gt; &lt;group| &gt; &lt;silent| &gt;</span></p><p class="c3"><span class="c0">MPEXIT &lt;north|east|south|west|up|down&gt; &lt;target room&gt; [flags] [exit descr]</span></p><p class="c3"><span class="c0">&nbsp;where &lt;target room&gt; is the target room&#39;s vnum, [flags] are optional exit</span></p><p class="c3"><span class="c0">&nbsp;flags, and [exit descr] is an optional exit description.</span></p><p class="c3"><span class="c0">&nbsp;Example: MPEXIT north 50001 SECRET ANTI-GOOD This is a secret anti-good exit.</span></p><p class="c3"><span class="c0">&nbsp;Note: Previous exit will be replaced. Use &lt;target room&gt; -1 to remove exit.</span></p><p class="c3"><span class="c0">MPAFFECT &lt;target&gt; &lt;spell&gt; &lt;duration&gt; - add a spell affect on target</span></p><p class="c3"><span class="c0">MPHEAL &lt;target&gt; XdY+Z - heals target for XdY+Z hitpoints</span></p><p class="c2"><span class="c0"></span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">======================END OF QUICK REFERENCE SHEET===========================</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">++++++++++++++++++++++++++++++++EXAMPLE++++++++++++++++++++++++++++++++++++++</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Referenced from above in the Control Flow section</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">&gt;act_prog p pokes you in the~</span></p><p class="c3"><span class="c0">if isnpc($n)</span></p><p class="c3"><span class="c0">chuckle</span></p><p class="c3"><span class="c0">poke $n</span></p><p class="c3"><span class="c0">else</span></p><p class="c3"><span class="c0">if level($n) &lt;= 5</span></p><p class="c3"><span class="c0">or isgood($n)</span></p><p class="c3"><span class="c0">tell $n I would rather you didnt poke me.</span></p><p class="c3"><span class="c0">else</span></p><p class="c3"><span class="c0">if level($n)&gt;15</span></p><p class="c3"><span class="c0">scream</span></p><p class="c3"><span class="c0">say Ya know $n. I hate being poked!!!</span></p><p class="c3"><span class="c0">kill $n</span></p><p class="c3"><span class="c0">break</span></p><p class="c3"><span class="c0">endif</span></p><p class="c3"><span class="c0">slap $n</span></p><p class="c3"><span class="c0">shout MOMMY!!! $N is poking me.</span></p><p class="c3"><span class="c0">endif</span></p><p class="c3"><span class="c0">endif</span></p><p class="c3"><span class="c0">~</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Ok.. time to translate.. the trigger will only happen when the mobile</span></p><p class="c3"><span class="c0">gets the message &quot;... pokes you in the ...&quot; If the offender (recall</span></p><p class="c3"><span class="c0">the $n and $N refer to the char who did the poking...) is an NPC, then</span></p><p class="c3"><span class="c0">the mobile merely chuckles and pokes back. If the offender was a PC</span></p><p class="c3"><span class="c0">then good and low level characters get a warning, high level chars</span></p><p class="c3"><span class="c0">get attacked, and midlevel chars get slapped and whined at.</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Note that two of these mobiles could easily get into an infinite poke</span></p><p class="c3"><span class="c0">war which slows down (or frequently crashes) the mud just a bit :(</span></p><p class="c3"><span class="c0">Be very careful about things like that if you can. (i.e dont respond</span></p><p class="c3"><span class="c0">to a poke with a poke, and try not to let heavily programmed robot mobiles</span></p><p class="c3"><span class="c0">wander around together. More on that is given above.)</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Also, it is clear that the &#39;order&#39; command could get confused with the &#39;or&#39;</span></p><p class="c3"><span class="c0">control flow. However, this is only the case when &#39;order&#39; is abbreviated to</span></p><p class="c3"><span class="c0">its two letter form, and placed immediately following an &#39;if&#39; line. Thus,</span></p><p class="c3"><span class="c0">if you want to be that malicious in trying to break the MOBprogram code,</span></p><p class="c3"><span class="c0">noone is going to stand in your way (However, the result of this would be</span></p><p class="c3"><span class="c0">a bug message and a bail out from the ifcheck so things dont really break)</span></p><p class="c3"><span class="c0">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span></p><p class="c2"><span class="c0"></span></p><p class="c3"><span class="c0">Further questions about mobprogs on Burning</span></p><p class="c3"><span class="c0">can be sent to bane@burningmud.com.</span></p></body></html>